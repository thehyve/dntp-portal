<!--
Copyright (C) 2016  Stichting PALGA
This file is distributed under the GNU Affero General Public License
(see accompanying file LICENSE).
-->
<div class="container-fluid">

    <!--Side Bar-->
    <div class="col-sm-3 col-md-2 sidebar">
        &nbsp;
    </div>

    <!--Content-->
    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" ng-if="isPalga()" ng-controller="AgreementFormTemplateController" ng-if="authenticated">
        <!--error msgs-->
        <div class="alert alert-danger" role="alert" ng-if="error.length" id="error">
            {{error|translate}}.
        </div>

        <div class="container-fluid">
            <!--template-->
            <div class="col-sm-6">
                <h1 class="no-print">{{ 'Edit form' | translate }}</h1>
                <hr class="no-print">
                <div class="template-window no-print">
                    <div id="editor" name="template-editor" text-angular ng-model="template.contents" class="dntp-text-angular"></div>
                    <br>
                    <h4>{{'Insert variables'|translate}}:</h4>

                    <div class="well">
            <span ng-repeat="varname in variableNames"
                  role="button" class="btn btn-xs btn-default"
                  ng-click="insertVariable(varname)">
                <samp><span ng-non-bindable>{{</span>{{varname}}<span ng-non-bindable>}}</span></samp>
            </span>
                    </div>

                    <button ng-click="saveTemplate(template)" type="button" class="btn btn-primary">
                        {{'Save' | translate}}
                    </button>
                    <button ng-click="printTemplate()" type="button" class="btn btn-success">
                        {{'Print' | translate}}
                    </button>
                </div>
            </div>

            <!--preview-->
            <div class="col-sm-6">
                <div class="template-window">
                    <h3 class="no-print" style="text-align: center;">{{'Preview' | translate}}</h3>
                    <div ng-bind-html="template_contents" class="template-preview"></div>
                </div>
            </div>
        </div>
    </div>

</div>

<div ng-if="!authenticated">
    <div class="alert alert-danger" role="alert">
        {{'Not logged in'|translate}}.
    </div>
</div>
